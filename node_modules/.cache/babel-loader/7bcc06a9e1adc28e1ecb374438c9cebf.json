{"ast":null,"code":"var Node = require('./core/document/Node'),\n    Panel = require('./group/Panel'),\n    Options = require('./component/Options'),\n    Picker = require('./component/Picker');\n\nvar CSS = require('./core/document/CSS');\n\nvar EventDispatcher = require('./core/event/EventDispatcher'),\n    Event_ = require('./core/event/Event'),\n    DocumentEvent = require('./core/document/DocumentEvent'),\n    NodeEvent = require('./core/document/NodeEvent'),\n    ComponentEvent = require('./core/ComponentEvent'),\n    HistoryEvent = require('./core/HistoryEvent'),\n    MenuEvent = require('./group/MenuEvent');\n\nvar History = require('./core/History'),\n    State = require('./core/State');\n\nvar Mouse = require('./core/document/Mouse');\n\nvar ValuePlotter = require('./component/ValuePlotter');\n\nvar StringOutput = require('./component/StringOutput'),\n    StringInput = require('./component/StringInput'),\n    NumberOutput = require('./component/NumberOutput'),\n    Slider = require('./component/Slider'),\n    Select = require('./component/Select');\n\nvar DEFAULT_HISTORY = false,\n    DEFAULT_OPACITY = 1.0,\n    DEFAULT_PANELS_CLOSABLE = false,\n    DEFAULT_ENABLE = true,\n    DEFAULT_LOAD_AND_SAVE = false;\nvar DEFAULT_TRIGGER_SHORTCUT_CHAR = 'h';\nvar initiated = false;\n/**\r\n * Initializes ControlKit.\r\n * @param {Object} [options] - ControlKit options\r\n * @param {Number} [options.opacity=1.0] - Overall opacity\r\n * @param {Boolean} [options.enable=true] - Initial ControlKit state, enabled / disabled\r\n * @param {Boolean} [options.useExternalStyle=false] - If true, an external style is used instead of the build-in one\r\n * @param {String} [options.styleString] - If true, an external style is used instead of the build-in one\r\n * @param {Boolean}[options.history=false] - (Experimental) Enables a value history for all components\r\n */\n\nfunction ControlKit(options) {\n  if (initiated) {\n    throw new Error('ControlKit is already initialized.');\n  }\n\n  options = options || {};\n  options.history = options.history === undefined ? DEFAULT_HISTORY : options.history;\n  options.loadAndSave = options.loadAndSave === undefined ? DEFAULT_LOAD_AND_SAVE : options.loadAndSave;\n  options.opacity = options.opacity === undefined ? DEFAULT_OPACITY : options.opacity;\n  options.panelsClosable = options.panelsClosable === undefined ? DEFAULT_PANELS_CLOSABLE : options.panelsClosable;\n  options.useExternalStyle = options.useExternalStyle === undefined ? false : options.useExternalStyle;\n  options.enable = options.enable === undefined ? DEFAULT_ENABLE : options.enable;\n  EventDispatcher.apply(this, arguments);\n  var node = null;\n\n  if (!options.parentDomElementId) {\n    node = new Node();\n    document.body.appendChild(node.getElement());\n  } else {\n    node = Node.getNodeById(options.parentDomElementId);\n  }\n\n  if (!options.useExternalStyle) {\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    var css = !options.style ? require('./core/document/Style').string : options.styleString;\n\n    if (style.stylesheet) {\n      style.stylesheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    (document.head || document.getElementsByTagName('head')[0]).appendChild(style);\n  }\n\n  node.setProperty('id', CSS.ControlKit);\n  this._node = node;\n  this._panels = [];\n  this._enabled = options.enable;\n  this._historyEnabled = options.history;\n  this._statesEnabled = options.loadAndSave;\n  this._panelsClosable = options.panelsClosable;\n  var history = History.setup();\n\n  if (!this._historyEnabled) {\n    history.disable();\n  } else {\n    history.addEventListener(HistoryEvent.STATE_PUSH, this, 'onHistoryStatePush');\n    history.addEventListener(HistoryEvent.STATE_POP, this, 'onHistoryStatePop');\n  }\n\n  Mouse.setup();\n  Picker.setup(node);\n  Options.setup(node);\n  var opacity = options.opacity;\n\n  if (opacity != 1.0 && opacity != 0.0) {\n    node.setStyleProperty('opacity', opacity);\n  }\n\n  this._canUpdate = true;\n  var self = this;\n  var interval,\n      count = 0,\n      countMax = 10;\n  window.addEventListener(DocumentEvent.WINDOW_RESIZE, function () {\n    self._canUpdate = false;\n    clearInterval(interval);\n    interval = setInterval(function () {\n      if (count >= countMax) {\n        count = 0;\n        self._canUpdate = true;\n        clearInterval(interval);\n      }\n\n      count++;\n    }, 25);\n  });\n  this._shortcutEnable = DEFAULT_TRIGGER_SHORTCUT_CHAR;\n  document.addEventListener('keydown', function (e) {\n    if (!(e.ctrlKey && String.fromCharCode(e.which || e.keyCode).toLowerCase() == self._shortcutEnable)) {\n      return;\n    }\n\n    self._enabled = !self._enabled;\n\n    if (self._enabled) {\n      self._enable();\n    } else {\n      self._disable();\n    }\n  });\n\n  if (!this._enabled) {\n    this._disable();\n  }\n\n  initiated = true;\n}\n\nControlKit.prototype = Object.create(EventDispatcher.prototype);\nControlKit.prototype.constructor = ControlKit;\n/**\r\n * Adds a panel.\r\n * @param {Object} [params] - Panel options\r\n * @param {String} [params.label='Control Panel'] - The panel label\r\n * @param {Number} [params.width=300] - The width\r\n * @param {Number} [params.height] - Constrained panel height\r\n * @param {Number} [params.ratio=40] - The ratio of label (default:40%) and component (default:60%) width\r\n * @param {String} [params.align='right'] - Float 'left' or 'right', multiple panels get aligned next to each other\r\n * @param {Boolean} [params.fixed=true] - If false the panel can be moved\r\n * @param {Array} [params.position=[0,0]] - If unfixed, the panel panel position relative to alignment (eg. if 'left' 0 + position[0] or if 'right' window.innerHeight - position[0] - panelWidth)\r\n * @param {Number} [params.opacity=1.0] - The panelÂ´s opacity\r\n * @param {String} [params.dock=false] - (Experimental) Indicates whether the panel should be docked to either the left or right window border (depending on params.align), docked panels height equal window height\r\n  * @returns {Panel}\r\n */\n\nControlKit.prototype.addPanel = function (params) {\n  var panel = new Panel(this, params);\n\n  this._panels.push(panel);\n\n  return panel;\n};\n/**\r\n * Updates all ControlKit components if the wat\r\n */\n\n\nControlKit.prototype.update = function () {\n  if (!this._enabled || !this._canUpdate) {\n    return;\n  }\n\n  var i, j, k;\n  var l, m, n;\n  var panels = this._panels,\n      panel,\n      groups,\n      components,\n      component;\n  i = -1;\n  l = panels.length;\n\n  while (++i < l) {\n    panel = panels[i];\n\n    if (panel.isDisabled()) {\n      continue;\n    }\n\n    groups = panel.getGroups();\n    j = -1;\n    m = groups.length;\n\n    while (++j < m) {\n      components = groups[j].getComponents();\n      k = -1;\n      n = components.length;\n\n      while (++k < n) {\n        component = components[k];\n\n        if (component.isDisabled()) {\n          continue;\n        }\n\n        if (component instanceof ValuePlotter || component instanceof StringOutput || component instanceof StringInput || component instanceof NumberOutput) {\n          component.update();\n        }\n\n        if (component instanceof Slider || component instanceof Select) {\n          component.onValueUpdate({\n            data: {\n              origin: null\n            }\n          });\n        }\n      }\n    }\n  }\n};\n/**\r\n * Return the first component found with a given key or label.\r\n * @param {Object} [params] - Options\r\n * @param {String} [params.label] - Label\r\n * @param {String} [params.key] - Key\r\n  */\n\n\nControlKit.prototype.getComponentBy = function (params) {\n  var i, j, k;\n  var l, m, n;\n  var panels = this._panels,\n      panel,\n      groups,\n      components,\n      component;\n  i = -1;\n  l = panels.length;\n\n  while (++i < l) {\n    panel = panels[i];\n    groups = panel.getGroups();\n    j = -1;\n    m = groups.length;\n\n    while (++j < m) {\n      components = groups[j].getComponents();\n      k = -1;\n      n = components.length;\n\n      while (++k < n) {\n        component = components[k];\n        if (!component) continue;\n        if (component._key === params.key) return component;\n        if (!component._lablNode) continue;\n        if (component._lablNode._element.innerText === params.label) return component;\n      }\n    }\n  }\n};\n\nControlKit.prototype.historyIsEnabled = function () {\n  return this._historyEnabled;\n};\n\nControlKit.prototype.statesAreEnabled = function () {\n  return this._statesEnabled;\n};\n\nControlKit.prototype.panelsAreClosable = function () {\n  return this._panelsClosable;\n};\n\nControlKit.prototype._enable = function () {\n  var i = -1,\n      p = this._panels,\n      l = p.length;\n\n  while (++i < l) {\n    p[i].enable();\n  }\n\n  this._node.setStyleProperty('visibility', '');\n};\n\nControlKit.prototype._disable = function () {\n  var i = -1,\n      p = this._panels,\n      l = p.length;\n\n  while (++i < l) {\n    p[i].disable();\n  }\n\n  this._node.setStyleProperty('visibility', 'hidden');\n};\n/**\r\n * Enables and shows controlKit.\r\n */\n\n\nControlKit.prototype.enable = function () {\n  this._enable();\n\n  this._enabled = true;\n};\n/**\r\n * Disable and hides controlKit.\r\n */\n\n\nControlKit.prototype.disable = function () {\n  this._disable();\n\n  this._enabled = false;\n};\n/**\r\n * Specifies the key to be used with ctrl & char, to trigger ControlKits visibility.\r\n * @param char\r\n */\n\n\nControlKit.prototype.setShortcutEnable = function (char) {\n  this._shortcutEnable = char;\n};\n\nControlKit.prototype.onHistoryStatePush = function () {\n  this.dispatchEvent(new Event_(this, MenuEvent.UPDATE_MENU, null));\n};\n\nControlKit.prototype.onHistoryStatePop = function () {\n  this.dispatchEvent(new Event_(this, ComponentEvent.UPDATE_VALUE, {\n    origin: null\n  }));\n  this.dispatchEvent(new Event_(this, MenuEvent.UPDATE_MENU, null));\n};\n\nControlKit.prototype.loadSettings = function (data) {\n  var i = -1,\n      l = data.length;\n  var panels = this._panels;\n\n  while (++i < l) {\n    panels[i].setData(data[i]);\n  }\n};\n\nControlKit.prototype._loadState = function () {\n  State.load(this.loadSettings.bind(this));\n};\n\nControlKit.prototype._saveState = function () {\n  this.update(); //force sync\n\n  var p = this._panels,\n      i = -1,\n      l = p.length;\n  var data = new Array(l);\n\n  while (++i < l) {\n    data[i] = p[i].getData();\n  }\n\n  State.save({\n    data: data\n  });\n};\n/**\r\n * Returns the root element.\r\n * @returns {*}\r\n */\n\n\nControlKit.prototype.getNode = function () {\n  return this._node;\n};\n\nControlKit.destroy = function () {\n  Mouse.get().destroy();\n  Options.get().destroy();\n  Picker.get().destroy();\n  initiated = false;\n};\n\nmodule.exports = ControlKit;","map":{"version":3,"sources":["/Users/roaa/Desktop/demo/node_modules/@brunoimbrizi/controlkit/lib/ControlKit.js"],"names":["Node","require","Panel","Options","Picker","CSS","EventDispatcher","Event_","DocumentEvent","NodeEvent","ComponentEvent","HistoryEvent","MenuEvent","History","State","Mouse","ValuePlotter","StringOutput","StringInput","NumberOutput","Slider","Select","DEFAULT_HISTORY","DEFAULT_OPACITY","DEFAULT_PANELS_CLOSABLE","DEFAULT_ENABLE","DEFAULT_LOAD_AND_SAVE","DEFAULT_TRIGGER_SHORTCUT_CHAR","initiated","ControlKit","options","Error","history","undefined","loadAndSave","opacity","panelsClosable","useExternalStyle","enable","apply","arguments","node","parentDomElementId","document","body","appendChild","getElement","getNodeById","style","createElement","type","css","string","styleString","stylesheet","cssText","createTextNode","head","getElementsByTagName","setProperty","_node","_panels","_enabled","_historyEnabled","_statesEnabled","_panelsClosable","setup","disable","addEventListener","STATE_PUSH","STATE_POP","setStyleProperty","_canUpdate","self","interval","count","countMax","window","WINDOW_RESIZE","clearInterval","setInterval","_shortcutEnable","e","ctrlKey","String","fromCharCode","which","keyCode","toLowerCase","_enable","_disable","prototype","Object","create","constructor","addPanel","params","panel","push","update","i","j","k","l","m","n","panels","groups","components","component","length","isDisabled","getGroups","getComponents","onValueUpdate","data","origin","getComponentBy","_key","key","_lablNode","_element","innerText","label","historyIsEnabled","statesAreEnabled","panelsAreClosable","p","setShortcutEnable","char","onHistoryStatePush","dispatchEvent","UPDATE_MENU","onHistoryStatePop","UPDATE_VALUE","loadSettings","setData","_loadState","load","bind","_saveState","Array","getData","save","getNode","destroy","get","module","exports"],"mappings":"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","sourcesContent":["var Node    = require('./core/document/Node'),\r\n    Panel   = require('./group/Panel'),\r\n    Options = require('./component/Options'),\r\n    Picker  = require('./component/Picker');\r\n\r\nvar CSS = require('./core/document/CSS');\r\n\r\nvar EventDispatcher = require('./core/event/EventDispatcher'),\r\n    Event_          = require('./core/event/Event'),\r\n    DocumentEvent   = require('./core/document/DocumentEvent'),\r\n    NodeEvent       = require('./core/document/NodeEvent'),\r\n    ComponentEvent  = require('./core/ComponentEvent'),\r\n    HistoryEvent    = require('./core/HistoryEvent'),\r\n    MenuEvent       = require('./group/MenuEvent');\r\n\r\nvar History = require('./core/History'),\r\n    State   = require('./core/State');\r\n\r\nvar Mouse   = require('./core/document/Mouse');\r\n\r\nvar ValuePlotter = require('./component/ValuePlotter');\r\nvar StringOutput = require('./component/StringOutput'),\r\n    StringInput = require('./component/StringInput'),\r\n    NumberOutput = require('./component/NumberOutput'),\r\n    Slider = require('./component/Slider'),\r\n    Select = require('./component/Select');\r\n\r\nvar DEFAULT_HISTORY = false,\r\n    DEFAULT_OPACITY = 1.0,\r\n    DEFAULT_PANELS_CLOSABLE = false,\r\n    DEFAULT_ENABLE = true,\r\n    DEFAULT_LOAD_AND_SAVE = false;\r\n\r\nvar DEFAULT_TRIGGER_SHORTCUT_CHAR = 'h';\r\n\r\nvar initiated = false;\r\n\r\n/**\r\n * Initializes ControlKit.\r\n * @param {Object} [options] - ControlKit options\r\n * @param {Number} [options.opacity=1.0] - Overall opacity\r\n * @param {Boolean} [options.enable=true] - Initial ControlKit state, enabled / disabled\r\n * @param {Boolean} [options.useExternalStyle=false] - If true, an external style is used instead of the build-in one\r\n * @param {String} [options.styleString] - If true, an external style is used instead of the build-in one\r\n * @param {Boolean}[options.history=false] - (Experimental) Enables a value history for all components\r\n */\r\nfunction ControlKit(options) {\r\n    if(initiated){\r\n        throw new Error('ControlKit is already initialized.');\r\n    }\r\n    options                  = options || {};\r\n    options.history          = options.history === undefined ? DEFAULT_HISTORY : options.history;\r\n    options.loadAndSave      = options.loadAndSave === undefined ? DEFAULT_LOAD_AND_SAVE : options.loadAndSave;\r\n    options.opacity          = options.opacity === undefined ? DEFAULT_OPACITY : options.opacity;\r\n    options.panelsClosable   = options.panelsClosable === undefined ? DEFAULT_PANELS_CLOSABLE : options.panelsClosable;\r\n    options.useExternalStyle = options.useExternalStyle === undefined ? false : options.useExternalStyle;\r\n    options.enable           = options.enable === undefined ? DEFAULT_ENABLE : options.enable;\r\n\r\n    EventDispatcher.apply(this, arguments);\r\n\r\n    var node = null;\r\n    if (!options.parentDomElementId) {\r\n        node = new Node();\r\n        document.body.appendChild(node.getElement());\r\n    } else {\r\n        node = Node.getNodeById(options.parentDomElementId);\r\n    }\r\n\r\n    if(!options.useExternalStyle){\r\n        var style = document.createElement('style');\r\n            style.type = 'text/css';\r\n        var css = !options.style ? require('./core/document/Style').string : options.styleString;\r\n        if(style.stylesheet){\r\n            style.stylesheet.cssText = css;\r\n        } else {\r\n            style.appendChild(document.createTextNode(css));\r\n        }\r\n        (document.head || document.getElementsByTagName('head')[0]).appendChild(style);\r\n    }\r\n\r\n    node.setProperty('id', CSS.ControlKit);\r\n\r\n    this._node = node;\r\n    this._panels = [];\r\n    this._enabled = options.enable;\r\n    this._historyEnabled = options.history;\r\n    this._statesEnabled = options.loadAndSave;\r\n    this._panelsClosable = options.panelsClosable;\r\n\r\n    var history = History.setup();\r\n\r\n    if (!this._historyEnabled){\r\n        history.disable();\r\n    } else {\r\n        history.addEventListener(HistoryEvent.STATE_PUSH, this, 'onHistoryStatePush');\r\n        history.addEventListener(HistoryEvent.STATE_POP, this, 'onHistoryStatePop');\r\n    }\r\n\r\n    Mouse.setup();\r\n    Picker.setup(node);\r\n    Options.setup(node);\r\n\r\n    var opacity = options.opacity;\r\n    if (opacity != 1.0 && opacity != 0.0) {\r\n        node.setStyleProperty('opacity', opacity);\r\n    }\r\n\r\n    this._canUpdate = true;\r\n\r\n    var self = this;\r\n\r\n    var interval,\r\n        count = 0,\r\n        countMax = 10;\r\n\r\n    window.addEventListener(DocumentEvent.WINDOW_RESIZE,function(){\r\n        self._canUpdate = false;\r\n        clearInterval(interval);\r\n        interval = setInterval(function(){\r\n            if(count >= countMax){\r\n                count = 0;\r\n                self._canUpdate = true;\r\n                clearInterval(interval);\r\n            }\r\n            count++;\r\n        },25)\r\n    });\r\n\r\n    this._shortcutEnable = DEFAULT_TRIGGER_SHORTCUT_CHAR;\r\n\r\n    document.addEventListener('keydown',function(e){\r\n        if(!(e.ctrlKey && String.fromCharCode(e.which || e.keyCode).toLowerCase() == self._shortcutEnable)){\r\n            return;\r\n        }\r\n        self._enabled = !self._enabled;\r\n        if(self._enabled){\r\n            self._enable();\r\n        } else {\r\n            self._disable();\r\n        }\r\n    });\r\n\r\n    if(!this._enabled){\r\n        this._disable();\r\n    }\r\n\r\n    initiated = true;\r\n}\r\nControlKit.prototype = Object.create(EventDispatcher.prototype);\r\nControlKit.prototype.constructor = ControlKit;\r\n\r\n/**\r\n * Adds a panel.\r\n * @param {Object} [params] - Panel options\r\n * @param {String} [params.label='Control Panel'] - The panel label\r\n * @param {Number} [params.width=300] - The width\r\n * @param {Number} [params.height] - Constrained panel height\r\n * @param {Number} [params.ratio=40] - The ratio of label (default:40%) and component (default:60%) width\r\n * @param {String} [params.align='right'] - Float 'left' or 'right', multiple panels get aligned next to each other\r\n * @param {Boolean} [params.fixed=true] - If false the panel can be moved\r\n * @param {Array} [params.position=[0,0]] - If unfixed, the panel panel position relative to alignment (eg. if 'left' 0 + position[0] or if 'right' window.innerHeight - position[0] - panelWidth)\r\n * @param {Number} [params.opacity=1.0] - The panelÂ´s opacity\r\n * @param {String} [params.dock=false] - (Experimental) Indicates whether the panel should be docked to either the left or right window border (depending on params.align), docked panels height equal window height\r\n  * @returns {Panel}\r\n */\r\nControlKit.prototype.addPanel = function (params) {\r\n    var panel = new Panel(this, params);\r\n    this._panels.push(panel);\r\n    return panel;\r\n};\r\n\r\n/**\r\n * Updates all ControlKit components if the wat\r\n */\r\nControlKit.prototype.update = function () {\r\n    if (!this._enabled || !this._canUpdate){\r\n        return;\r\n    }\r\n    var i, j, k;\r\n    var l, m, n;\r\n    var panels = this._panels,\r\n        panel,\r\n        groups,\r\n        components,\r\n        component;\r\n\r\n    i = -1; l = panels.length;\r\n    while (++i < l) {\r\n        panel = panels[i];\r\n\r\n        if (panel.isDisabled()){\r\n            continue;\r\n        }\r\n        groups = panel.getGroups();\r\n        j = -1; m = groups.length;\r\n\r\n        while (++j < m) {\r\n            components = groups[j].getComponents();\r\n            k = -1; n = components.length;\r\n\r\n            while (++k < n) {\r\n                component = components[k];\r\n                if (component.isDisabled()){\r\n                    continue;\r\n                }\r\n                if (component instanceof ValuePlotter ||\r\n                    component instanceof StringOutput ||\r\n                    component instanceof StringInput ||\r\n                    component instanceof NumberOutput) {\r\n                    component.update();\r\n                }\r\n                if (component instanceof Slider ||\r\n                    component instanceof Select) {\r\n                    component.onValueUpdate({ data: { origin: null }});\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * Return the first component found with a given key or label.\r\n * @param {Object} [params] - Options\r\n * @param {String} [params.label] - Label\r\n * @param {String} [params.key] - Key\r\n  */\r\nControlKit.prototype.getComponentBy = function (params) {\r\n    var i, j, k;\r\n    var l, m, n;\r\n    var panels = this._panels,\r\n        panel,\r\n        groups,\r\n        components,\r\n        component;\r\n\r\n    i = -1; l = panels.length;\r\n    while (++i < l) {\r\n        panel = panels[i];\r\n\r\n        groups = panel.getGroups();\r\n        j = -1; m = groups.length;\r\n\r\n        while (++j < m) {\r\n            components = groups[j].getComponents();\r\n            k = -1; n = components.length;\r\n\r\n            while (++k < n) {\r\n                component = components[k];\r\n                if (!component) continue;\r\n\r\n                if (component._key === params.key) return component;\r\n                \r\n                if (!component._lablNode) continue;\r\n                if (component._lablNode._element.innerText === params.label) return component;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nControlKit.prototype.historyIsEnabled = function () {\r\n    return this._historyEnabled;\r\n};\r\n\r\nControlKit.prototype.statesAreEnabled = function(){\r\n    return this._statesEnabled;\r\n};\r\n\r\nControlKit.prototype.panelsAreClosable = function () {\r\n    return this._panelsClosable;\r\n};\r\n\r\nControlKit.prototype._enable = function(){\r\n    var i = -1, p = this._panels, l = p.length;\r\n    while (++i < l){\r\n        p[i].enable();\r\n    }\r\n    this._node.setStyleProperty('visibility', '');\r\n};\r\n\r\nControlKit.prototype._disable = function(){\r\n    var i = -1, p = this._panels, l = p.length;\r\n    while (++i < l){\r\n        p[i].disable();\r\n    }\r\n    this._node.setStyleProperty('visibility', 'hidden');\r\n};\r\n\r\n/**\r\n * Enables and shows controlKit.\r\n */\r\n\r\nControlKit.prototype.enable = function () {\r\n    this._enable();\r\n    this._enabled = true;\r\n};\r\n\r\n/**\r\n * Disable and hides controlKit.\r\n */\r\n\r\nControlKit.prototype.disable = function () {\r\n    this._disable();\r\n    this._enabled = false;\r\n};\r\n\r\n\r\n/**\r\n * Specifies the key to be used with ctrl & char, to trigger ControlKits visibility.\r\n * @param char\r\n */\r\n\r\nControlKit.prototype.setShortcutEnable = function(char){\r\n    this._shortcutEnable = char;\r\n};\r\n\r\nControlKit.prototype.onHistoryStatePush = function () {\r\n    this.dispatchEvent(new Event_(this, MenuEvent.UPDATE_MENU, null));\r\n};\r\n\r\nControlKit.prototype.onHistoryStatePop = function () {\r\n    this.dispatchEvent(new Event_(this, ComponentEvent.UPDATE_VALUE, {origin: null}));\r\n    this.dispatchEvent(new Event_(this, MenuEvent.UPDATE_MENU, null));\r\n};\r\n\r\nControlKit.prototype.loadSettings = function(data){\r\n    var i = -1, l = data.length;\r\n    var panels = this._panels;\r\n    while(++i < l){\r\n        panels[i].setData(data[i]);\r\n    }\r\n};\r\n\r\nControlKit.prototype._loadState = function(){\r\n    State.load(this.loadSettings.bind(this));\r\n};\r\n\r\nControlKit.prototype._saveState = function(){\r\n    this.update(); //force sync\r\n    var p = this._panels, i = -1, l = p.length;\r\n    var data = new Array(l);\r\n    while(++i < l){\r\n        data[i] = p[i].getData();\r\n    }\r\n    State.save({data:data});\r\n};\r\n\r\n/**\r\n * Returns the root element.\r\n * @returns {*}\r\n */\r\n\r\nControlKit.prototype.getNode = function () {\r\n    return this._node;\r\n};\r\n\r\nControlKit.destroy = function(){\r\n    Mouse.get().destroy();\r\n    Options.get().destroy();\r\n    Picker.get().destroy();\r\n    initiated = false;\r\n};\r\n\r\nmodule.exports = ControlKit;"]},"metadata":{},"sourceType":"script"}