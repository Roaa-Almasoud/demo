{"ast":null,"code":"import _classCallCheck from\"/Users/roaa/Desktop/demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/roaa/Desktop/demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import'three';import TweenLite from'gsap';import InteractiveControls from'./controls/InteractiveControls';import Particles from'./particles/Particles';import first from'../../static/images/bicycle.png';import second from'../../static/images/tree.png';var glslify=require('glslify');var WebGLView=/*#__PURE__*/function(){function WebGLView(app){_classCallCheck(this,WebGLView);this.app=app;this.samples=[first,second];this.initThree();this.initParticles();this.initControls();var rnd=~~(Math.random()*this.samples.length);this.goto(rnd);}_createClass(WebGLView,[{key:\"initThree\",value:function initThree(){// scene\nthis.scene=new THREE.Scene();// camera\nthis.camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,10000);this.camera.position.z=300;// renderer\nthis.renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});// clock\nthis.clock=new THREE.Clock(true);}},{key:\"initControls\",value:function initControls(){this.interactive=new InteractiveControls(this.camera,this.renderer.domElement);}},{key:\"initParticles\",value:function initParticles(){this.particles=new Particles(this);this.scene.add(this.particles.container);}// ---------------------------------------------------------------------------------------------\n// PUBLIC\n// ---------------------------------------------------------------------------------------------\n},{key:\"update\",value:function update(){var delta=this.clock.getDelta();if(this.particles)this.particles.update(delta);}},{key:\"draw\",value:function draw(){this.renderer.render(this.scene,this.camera);}},{key:\"goto\",value:function goto(index){var _this=this;// init next\nif(this.currSample==null)this.particles.init(this.samples[index]);// hide curr then init next\nelse{this.particles.hide(true).then(function(){_this.particles.init(_this.samples[index]);});}this.currSample=index;}},{key:\"next\",value:function next(){if(this.currSample<this.samples.length-1)this.goto(this.currSample+1);else this.goto(0);}// ---------------------------------------------------------------------------------------------\n// EVENT HANDLERS\n// ---------------------------------------------------------------------------------------------\n},{key:\"resize\",value:function resize(){if(!this.renderer)return;this.camera.aspect=window.innerWidth/window.innerHeight;this.camera.updateProjectionMatrix();this.fovHeight=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z;this.renderer.setSize(window.innerWidth,window.innerHeight);if(this.interactive)this.interactive.resize();if(this.particles)this.particles.resize();}}]);return WebGLView;}();export{WebGLView as default};","map":{"version":3,"sources":["/Users/roaa/Desktop/demo/src/scripts/webgl/WebGLView.js"],"names":["TweenLite","InteractiveControls","Particles","first","second","glslify","require","WebGLView","app","samples","initThree","initParticles","initControls","rnd","Math","random","length","goto","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","z","renderer","WebGLRenderer","antialias","alpha","clock","Clock","interactive","domElement","particles","add","container","delta","getDelta","update","render","index","currSample","init","hide","then","aspect","updateProjectionMatrix","fovHeight","tan","fov","PI","setSize","resize"],"mappings":"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","sourcesContent":["import 'three';\nimport  TweenLite  from 'gsap';\n\nimport InteractiveControls from './controls/InteractiveControls';\nimport Particles from './particles/Particles';\n\nimport first from '../../static/images/bicycle.png'\nimport second from '../../static/images/tree.png'\n\nconst glslify = require('glslify');\n\nexport default class WebGLView {\n\n\tconstructor(app) {\n\t\tthis.app = app;\n\n\t\tthis.samples = [\n\t\t\tfirst,\n\t\t\tsecond,\n\t\t];\n\n\t\tthis.initThree();\n\t\tthis.initParticles();\n\t\tthis.initControls();\n\n\t\tconst rnd = ~~(Math.random() * this.samples.length);\n\t\tthis.goto(rnd);\n\t}\n\n\tinitThree() {\n\t\t// scene\n\t\tthis.scene = new THREE.Scene();\n\n\t\t// camera\n\t\tthis.camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);\n\t\tthis.camera.position.z = 300;\n\n\t\t// renderer\n        this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n\n        // clock\n\t\tthis.clock = new THREE.Clock(true);\n\t}\n\n\tinitControls() {\n\t\tthis.interactive = new InteractiveControls(this.camera, this.renderer.domElement);\n\t}\n\n\tinitParticles() {\n\t\tthis.particles = new Particles(this);\n\t\tthis.scene.add(this.particles.container);\n\t}\n\n\t// ---------------------------------------------------------------------------------------------\n\t// PUBLIC\n\t// ---------------------------------------------------------------------------------------------\n\n\tupdate() {\n\t\tconst delta = this.clock.getDelta();\n\n\t\tif (this.particles) this.particles.update(delta);\n\t}\n\n\tdraw() {\n\t\tthis.renderer.render(this.scene, this.camera);\n\t}\n\n\n\tgoto(index) {\n\t\t// init next\n\t\tif (this.currSample == null) this.particles.init(this.samples[index]);\n\t\t// hide curr then init next\n\t\telse {\n\t\t\tthis.particles.hide(true).then(() => {\n\t\t\t\tthis.particles.init(this.samples[index]);\n\t\t\t});\n\t\t}\n\n\t\tthis.currSample = index;\n\t}\n\n\tnext() {\n\t\tif (this.currSample < this.samples.length - 1) this.goto(this.currSample + 1);\n\t\telse this.goto(0);\n\t}\n\n\t// ---------------------------------------------------------------------------------------------\n\t// EVENT HANDLERS\n\t// ---------------------------------------------------------------------------------------------\n\n\tresize() {\n\t\tif (!this.renderer) return;\n\t\tthis.camera.aspect = window.innerWidth / window.innerHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tthis.fovHeight = 2 * Math.tan((this.camera.fov * Math.PI) / 180 / 2) * this.camera.position.z;\n\n\t\tthis.renderer.setSize(window.innerWidth, window.innerHeight);\n\n\t\tif (this.interactive) this.interactive.resize();\n\t\tif (this.particles) this.particles.resize();\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}