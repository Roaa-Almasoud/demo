{"ast":null,"code":"var ObjectComponent = require('../core/ObjectComponent');\n\nvar Node = require('../core/document/Node');\n\nvar NumberInput_Internal = require('./NumberInput_Internal');\n\nvar CSS = require('../core/document/CSS');\n\nvar Event_ = require('../core/event/Event'),\n    ComponentEvent = require('../core/ComponentEvent');\n\nvar DEFAULT_STEP = 1.0,\n    DEFAULT_DP = 2;\n\nfunction Range(parent, object, value, params) {\n  ObjectComponent.apply(this, arguments);\n  params = params || {};\n  params.onChange = params.onChange || this._onChange;\n  params.step = params.step || DEFAULT_STEP;\n  params.dp = params.dp != null ? params.dp : DEFAULT_DP;\n  this._onChange = params.onChange;\n  var step = this._step = params.step,\n      dp = this._dp = params.dp; //FIXME: history push pop\n\n  var labelMin = new Node();\n  var inputMin = this._inputMin = new NumberInput_Internal(step, dp, this.pushHistoryState.bind(this), this._onInputMinChange.bind(this));\n  var labelMax = new Node();\n  var inputMax = this._inputMax = new NumberInput_Internal(step, dp, this.pushHistoryState.bind(this), this._onInputMaxChange.bind(this));\n  var labelMinWrap = new Node().setStyleClass(CSS.Wrap),\n      inputMinWrap = new Node().setStyleClass(CSS.Wrap),\n      labelMaxWrap = new Node().setStyleClass(CSS.Wrap),\n      inputMaxWrap = new Node().setStyleClass(CSS.Wrap);\n  labelMin.setStyleClass(CSS.Label).setProperty('innerHTML', 'MIN');\n  labelMax.setStyleClass(CSS.Label).setProperty('innerHTML', 'MAX');\n  var values = this._obj[this._key];\n  inputMin.setValue(values[0]);\n  inputMax.setValue(values[1]);\n  var wrap = this._wrapNode;\n  labelMinWrap.addChild(labelMin);\n  inputMinWrap.addChild(inputMin.getNode());\n  labelMaxWrap.addChild(labelMax);\n  inputMaxWrap.addChild(inputMax.getNode());\n  wrap.addChild(labelMinWrap);\n  wrap.addChild(inputMinWrap);\n  wrap.addChild(labelMaxWrap);\n  wrap.addChild(inputMaxWrap);\n}\n\nRange.prototype = Object.create(ObjectComponent.prototype);\nRange.prototype.constructor = Range;\n\nRange.prototype._onInputChange = function () {\n  this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n\n  this._onChange();\n};\n\nRange.prototype._updateValueMin = function () {\n  var values = this._obj[this._key];\n  var inputMin = this._inputMin,\n      inputValue = inputMin.getValue();\n\n  if (inputValue >= this._inputMax.getValue()) {\n    inputMin.setValue(values[0]);\n    return;\n  }\n\n  values[0] = inputValue;\n};\n\nRange.prototype._updateValueMax = function () {\n  var values = this._obj[this._key];\n  var inputMax = this._inputMax,\n      inputValue = inputMax.getValue();\n\n  if (inputValue <= this._inputMin.getValue()) {\n    inputMax.setValue(values[1]);\n    return;\n  }\n\n  values[1] = inputValue;\n};\n\nRange.prototype.onValueUpdate = function (e) {\n  if (e.data.origin == this) {\n    return;\n  }\n\n  if (e.data.origin == null) {}\n\n  var o = this._obj,\n      k = this._key;\n\n  this._inputMin.setValue(o[k][0]);\n\n  this._inputMax.setValue(o[k][1]);\n};\n\nRange.prototype.setValue = function (value) {\n  var o = this._obj,\n      k = this._key;\n  o[k][0] = value[0];\n  o[k][1] = value[1];\n  this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n};\n\nRange.prototype._onInputMinChange = function () {\n  this._updateValueMin();\n\n  this._onInputChange();\n};\n\nRange.prototype._onInputMaxChange = function () {\n  this._updateValueMax();\n\n  this._onInputChange();\n};\n\nmodule.exports = Range;","map":{"version":3,"sources":["/Users/roaa/Desktop/demo/node_modules/@brunoimbrizi/controlkit/lib/component/Range.js"],"names":["ObjectComponent","require","Node","NumberInput_Internal","CSS","Event_","ComponentEvent","DEFAULT_STEP","DEFAULT_DP","Range","parent","object","value","params","apply","arguments","onChange","_onChange","step","dp","_step","_dp","labelMin","inputMin","_inputMin","pushHistoryState","bind","_onInputMinChange","labelMax","inputMax","_inputMax","_onInputMaxChange","labelMinWrap","setStyleClass","Wrap","inputMinWrap","labelMaxWrap","inputMaxWrap","Label","setProperty","values","_obj","_key","setValue","wrap","_wrapNode","addChild","getNode","prototype","Object","create","constructor","_onInputChange","dispatchEvent","VALUE_UPDATED","_updateValueMin","inputValue","getValue","_updateValueMax","onValueUpdate","e","data","origin","o","k","module","exports"],"mappings":"AAAA,IAAIA,eAAe,GAAGC,OAAO,CAAC,yBAAD,CAA7B;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,uBAAD,CAAlB;;AACA,IAAIE,oBAAoB,GAAGF,OAAO,CAAC,wBAAD,CAAlC;;AACA,IAAIG,GAAG,GAAGH,OAAO,CAAC,sBAAD,CAAjB;;AAEA,IAAII,MAAM,GAAWJ,OAAO,CAAC,qBAAD,CAA5B;AAAA,IACIK,cAAc,GAAGL,OAAO,CAAC,wBAAD,CAD5B;;AAGA,IAAIM,YAAY,GAAG,GAAnB;AAAA,IACIC,UAAU,GAAK,CADnB;;AAGA,SAASC,KAAT,CAAeC,MAAf,EAAuBC,MAAvB,EAA+BC,KAA/B,EAAsCC,MAAtC,EAA8C;AAC1Cb,EAAAA,eAAe,CAACc,KAAhB,CAAsB,IAAtB,EAA2BC,SAA3B;AAEAF,EAAAA,MAAM,GAAYA,MAAM,IAAa,EAArC;AACAA,EAAAA,MAAM,CAACG,QAAP,GAAkBH,MAAM,CAACG,QAAP,IAAmB,KAAKC,SAA1C;AACAJ,EAAAA,MAAM,CAACK,IAAP,GAAkBL,MAAM,CAACK,IAAP,IAAeX,YAAjC;AACAM,EAAAA,MAAM,CAACM,EAAP,GAAmBN,MAAM,CAACM,EAAP,IAAa,IAAd,GAAsBN,MAAM,CAACM,EAA7B,GAAkCX,UAApD;AAEA,OAAKS,SAAL,GAAkBJ,MAAM,CAACG,QAAzB;AAEA,MAAIE,IAAI,GAAG,KAAKE,KAAL,GAAaP,MAAM,CAACK,IAA/B;AAAA,MACIC,EAAE,GAAK,KAAKE,GAAL,GAAaR,MAAM,CAACM,EAD/B,CAV0C,CAa1C;;AAEA,MAAIG,QAAQ,GAAG,IAAIpB,IAAJ,EAAf;AACA,MAAIqB,QAAQ,GAAG,KAAKC,SAAL,GAAiB,IAAIrB,oBAAJ,CAAyBe,IAAzB,EAA8BC,EAA9B,EAAkC,KAAKM,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAlC,EACqC,KAAKC,iBAAL,CAAuBD,IAAvB,CAA4B,IAA5B,CADrC,CAAhC;AAGA,MAAIE,QAAQ,GAAG,IAAI1B,IAAJ,EAAf;AACA,MAAI2B,QAAQ,GAAG,KAAKC,SAAL,GAAiB,IAAI3B,oBAAJ,CAAyBe,IAAzB,EAA8BC,EAA9B,EAAkC,KAAKM,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAlC,EACqC,KAAKK,iBAAL,CAAuBL,IAAvB,CAA4B,IAA5B,CADrC,CAAhC;AAGA,MAAIM,YAAY,GAAG,IAAI9B,IAAJ,GAAW+B,aAAX,CAAyB7B,GAAG,CAAC8B,IAA7B,CAAnB;AAAA,MACIC,YAAY,GAAG,IAAIjC,IAAJ,GAAW+B,aAAX,CAAyB7B,GAAG,CAAC8B,IAA7B,CADnB;AAAA,MAEIE,YAAY,GAAG,IAAIlC,IAAJ,GAAW+B,aAAX,CAAyB7B,GAAG,CAAC8B,IAA7B,CAFnB;AAAA,MAGIG,YAAY,GAAG,IAAInC,IAAJ,GAAW+B,aAAX,CAAyB7B,GAAG,CAAC8B,IAA7B,CAHnB;AAKAZ,EAAAA,QAAQ,CAACW,aAAT,CAAuB7B,GAAG,CAACkC,KAA3B,EAAkCC,WAAlC,CAA8C,WAA9C,EAA2D,KAA3D;AACAX,EAAAA,QAAQ,CAACK,aAAT,CAAuB7B,GAAG,CAACkC,KAA3B,EAAkCC,WAAlC,CAA8C,WAA9C,EAA2D,KAA3D;AAEA,MAAIC,MAAM,GAAG,KAAKC,IAAL,CAAU,KAAKC,IAAf,CAAb;AAEAnB,EAAAA,QAAQ,CAACoB,QAAT,CAAkBH,MAAM,CAAC,CAAD,CAAxB;AACAX,EAAAA,QAAQ,CAACc,QAAT,CAAkBH,MAAM,CAAC,CAAD,CAAxB;AAEA,MAAII,IAAI,GAAG,KAAKC,SAAhB;AAEAb,EAAAA,YAAY,CAACc,QAAb,CAAsBxB,QAAtB;AACAa,EAAAA,YAAY,CAACW,QAAb,CAAsBvB,QAAQ,CAACwB,OAAT,EAAtB;AACAX,EAAAA,YAAY,CAACU,QAAb,CAAsBlB,QAAtB;AACAS,EAAAA,YAAY,CAACS,QAAb,CAAsBjB,QAAQ,CAACkB,OAAT,EAAtB;AAEAH,EAAAA,IAAI,CAACE,QAAL,CAAcd,YAAd;AACAY,EAAAA,IAAI,CAACE,QAAL,CAAcX,YAAd;AACAS,EAAAA,IAAI,CAACE,QAAL,CAAcV,YAAd;AACAQ,EAAAA,IAAI,CAACE,QAAL,CAAcT,YAAd;AACH;;AACD5B,KAAK,CAACuC,SAAN,GAAkBC,MAAM,CAACC,MAAP,CAAclD,eAAe,CAACgD,SAA9B,CAAlB;AACAvC,KAAK,CAACuC,SAAN,CAAgBG,WAAhB,GAA8B1C,KAA9B;;AAEAA,KAAK,CAACuC,SAAN,CAAgBI,cAAhB,GAAiC,YAAY;AACzC,OAAKC,aAAL,CAAmB,IAAIhD,MAAJ,CAAW,IAAX,EAAiBC,cAAc,CAACgD,aAAhC,EAA+C,IAA/C,CAAnB;;AACA,OAAKrC,SAAL;AACH,CAHD;;AAKAR,KAAK,CAACuC,SAAN,CAAgBO,eAAhB,GAAkC,YAAY;AAC1C,MAAIf,MAAM,GAAG,KAAKC,IAAL,CAAU,KAAKC,IAAf,CAAb;AAEA,MAAInB,QAAQ,GAAG,KAAKC,SAApB;AAAA,MACIgC,UAAU,GAAGjC,QAAQ,CAACkC,QAAT,EADjB;;AAGA,MAAID,UAAU,IAAI,KAAK1B,SAAL,CAAe2B,QAAf,EAAlB,EAA6C;AACzClC,IAAAA,QAAQ,CAACoB,QAAT,CAAkBH,MAAM,CAAC,CAAD,CAAxB;AACA;AACH;;AACDA,EAAAA,MAAM,CAAC,CAAD,CAAN,GAAYgB,UAAZ;AAEH,CAZD;;AAcA/C,KAAK,CAACuC,SAAN,CAAgBU,eAAhB,GAAkC,YAAY;AAC1C,MAAIlB,MAAM,GAAG,KAAKC,IAAL,CAAU,KAAKC,IAAf,CAAb;AAEA,MAAIb,QAAQ,GAAG,KAAKC,SAApB;AAAA,MACI0B,UAAU,GAAG3B,QAAQ,CAAC4B,QAAT,EADjB;;AAGA,MAAID,UAAU,IAAI,KAAKhC,SAAL,CAAeiC,QAAf,EAAlB,EAA6C;AACzC5B,IAAAA,QAAQ,CAACc,QAAT,CAAkBH,MAAM,CAAC,CAAD,CAAxB;AACA;AACH;;AACDA,EAAAA,MAAM,CAAC,CAAD,CAAN,GAAYgB,UAAZ;AACH,CAXD;;AAcA/C,KAAK,CAACuC,SAAN,CAAgBW,aAAhB,GAAgC,UAAUC,CAAV,EAAa;AACzC,MAAIA,CAAC,CAACC,IAAF,CAAOC,MAAP,IAAiB,IAArB,EAA0B;AACtB;AACH;;AACD,MAAIF,CAAC,CAACC,IAAF,CAAOC,MAAP,IAAiB,IAArB,EAA2B,CAC1B;;AACD,MAAIC,CAAC,GAAG,KAAKtB,IAAb;AAAA,MAAkBuB,CAAC,GAAG,KAAKtB,IAA3B;;AACA,OAAKlB,SAAL,CAAemB,QAAf,CAAwBoB,CAAC,CAACC,CAAD,CAAD,CAAK,CAAL,CAAxB;;AACA,OAAKlC,SAAL,CAAea,QAAf,CAAwBoB,CAAC,CAACC,CAAD,CAAD,CAAK,CAAL,CAAxB;AACH,CATD;;AAWAvD,KAAK,CAACuC,SAAN,CAAgBL,QAAhB,GAA2B,UAAS/B,KAAT,EAAe;AACtC,MAAImD,CAAC,GAAG,KAAKtB,IAAb;AAAA,MAAkBuB,CAAC,GAAG,KAAKtB,IAA3B;AACAqB,EAAAA,CAAC,CAACC,CAAD,CAAD,CAAK,CAAL,IAAUpD,KAAK,CAAC,CAAD,CAAf;AACAmD,EAAAA,CAAC,CAACC,CAAD,CAAD,CAAK,CAAL,IAAUpD,KAAK,CAAC,CAAD,CAAf;AACA,OAAKyC,aAAL,CAAmB,IAAIhD,MAAJ,CAAW,IAAX,EAAgBC,cAAc,CAACgD,aAA/B,EAA6C,IAA7C,CAAnB;AACH,CALD;;AAOA7C,KAAK,CAACuC,SAAN,CAAgBrB,iBAAhB,GAAoC,YAAY;AAC5C,OAAK4B,eAAL;;AACA,OAAKH,cAAL;AACH,CAHD;;AAKA3C,KAAK,CAACuC,SAAN,CAAgBjB,iBAAhB,GAAoC,YAAY;AAC5C,OAAK2B,eAAL;;AACA,OAAKN,cAAL;AACH,CAHD;;AAKAa,MAAM,CAACC,OAAP,GAAiBzD,KAAjB","sourcesContent":["var ObjectComponent = require('../core/ObjectComponent');\r\nvar Node = require('../core/document/Node');\r\nvar NumberInput_Internal = require('./NumberInput_Internal');\r\nvar CSS = require('../core/document/CSS');\r\n\r\nvar Event_         = require('../core/event/Event'),\r\n    ComponentEvent = require('../core/ComponentEvent');\r\n\r\nvar DEFAULT_STEP = 1.0,\r\n    DEFAULT_DP   = 2;\r\n\r\nfunction Range(parent, object, value, params) {\r\n    ObjectComponent.apply(this,arguments);\r\n\r\n    params          = params          || {};\r\n    params.onChange = params.onChange || this._onChange;\r\n    params.step     = params.step || DEFAULT_STEP;\r\n    params.dp       = (params.dp != null) ? params.dp : DEFAULT_DP;\r\n\r\n    this._onChange  = params.onChange;\r\n\r\n    var step = this._step = params.step,\r\n        dp   = this._dp   = params.dp;\r\n\r\n    //FIXME: history push pop\r\n\r\n    var labelMin = new Node();\r\n    var inputMin = this._inputMin = new NumberInput_Internal(step,dp, this.pushHistoryState.bind(this),\r\n                                                                         this._onInputMinChange.bind(this));\r\n\r\n    var labelMax = new Node();\r\n    var inputMax = this._inputMax = new NumberInput_Internal(step,dp, this.pushHistoryState.bind(this),\r\n                                                                         this._onInputMaxChange.bind(this));\r\n\r\n    var labelMinWrap = new Node().setStyleClass(CSS.Wrap),\r\n        inputMinWrap = new Node().setStyleClass(CSS.Wrap),\r\n        labelMaxWrap = new Node().setStyleClass(CSS.Wrap),\r\n        inputMaxWrap = new Node().setStyleClass(CSS.Wrap);\r\n\r\n    labelMin.setStyleClass(CSS.Label).setProperty('innerHTML', 'MIN');\r\n    labelMax.setStyleClass(CSS.Label).setProperty('innerHTML', 'MAX');\r\n\r\n    var values = this._obj[this._key];\r\n\r\n    inputMin.setValue(values[0]);\r\n    inputMax.setValue(values[1]);\r\n\r\n    var wrap = this._wrapNode;\r\n\r\n    labelMinWrap.addChild(labelMin);\r\n    inputMinWrap.addChild(inputMin.getNode());\r\n    labelMaxWrap.addChild(labelMax);\r\n    inputMaxWrap.addChild(inputMax.getNode());\r\n\r\n    wrap.addChild(labelMinWrap);\r\n    wrap.addChild(inputMinWrap);\r\n    wrap.addChild(labelMaxWrap);\r\n    wrap.addChild(inputMaxWrap);\r\n}\r\nRange.prototype = Object.create(ObjectComponent.prototype);\r\nRange.prototype.constructor = Range;\r\n\r\nRange.prototype._onInputChange = function () {\r\n    this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\r\n    this._onChange();\r\n};\r\n\r\nRange.prototype._updateValueMin = function () {\r\n    var values = this._obj[this._key];\r\n\r\n    var inputMin = this._inputMin,\r\n        inputValue = inputMin.getValue();\r\n\r\n    if (inputValue >= this._inputMax.getValue()) {\r\n        inputMin.setValue(values[0]);\r\n        return;\r\n    }\r\n    values[0] = inputValue;\r\n\r\n};\r\n\r\nRange.prototype._updateValueMax = function () {\r\n    var values = this._obj[this._key];\r\n\r\n    var inputMax = this._inputMax,\r\n        inputValue = inputMax.getValue();\r\n\r\n    if (inputValue <= this._inputMin.getValue()) {\r\n        inputMax.setValue(values[1]);\r\n        return;\r\n    }\r\n    values[1] = inputValue;\r\n};\r\n\r\n\r\nRange.prototype.onValueUpdate = function (e) {\r\n    if (e.data.origin == this){\r\n        return;\r\n    }\r\n    if (e.data.origin == null) {\r\n    }\r\n    var o = this._obj,k = this._key;\r\n    this._inputMin.setValue(o[k][0]);\r\n    this._inputMax.setValue(o[k][1]);\r\n};\r\n\r\nRange.prototype.setValue = function(value){\r\n    var o = this._obj,k = this._key;\r\n    o[k][0] = value[0];\r\n    o[k][1] = value[1];\r\n    this.dispatchEvent(new Event_(this,ComponentEvent.VALUE_UPDATED,null));\r\n};\r\n\r\nRange.prototype._onInputMinChange = function () {\r\n    this._updateValueMin();\r\n    this._onInputChange();\r\n};\r\n\r\nRange.prototype._onInputMaxChange = function () {\r\n    this._updateValueMax();\r\n    this._onInputChange();\r\n};\r\n\r\nmodule.exports = Range;"]},"metadata":{},"sourceType":"script"}