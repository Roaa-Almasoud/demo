{"ast":null,"code":"var EventDispatcher = require('./event/EventDispatcher'),\n    Event_ = require('./event/Event'),\n    HistoryEvent = require('./HistoryEvent');\n\nvar MAX_STATES = 30;\n\nfunction History() {\n  EventDispatcher.apply(this, arguments);\n  this._states = [];\n  this._enabled = false;\n}\n\nHistory.prototype = Object.create(EventDispatcher.prototype);\nHistory.prototype.constructor = History;\n\nHistory.prototype.pushState = function (object, key, value) {\n  if (this._enabled) {\n    return;\n  }\n\n  var states = this._states;\n\n  if (states.length >= MAX_STATES) {\n    states.shift();\n  }\n\n  states.push({\n    object: object,\n    key: key,\n    value: value\n  });\n  this.dispatchEvent(new Event_(this, HistoryEvent.STATE_PUSH, null));\n};\n\nHistory.prototype.getState = function (object, key) {\n  var states = this._states,\n      statesLen = states.length;\n\n  if (statesLen == 0) {\n    return null;\n  }\n\n  var state, value;\n  var i = -1;\n\n  while (++i < statesLen) {\n    state = states[i];\n\n    if (state.object === object) {\n      if (state.key === key) {\n        value = state.value;\n        break;\n      }\n    }\n  }\n\n  return value;\n};\n\nHistory.prototype.popState = function () {\n  if (this._enabled) {\n    return;\n  }\n\n  var states = this._states;\n\n  if (states.length < 1) {\n    return;\n  }\n\n  var lastState = states.pop();\n  lastState.object[lastState.key] = lastState.value;\n  this.dispatchEvent(new Event_(this, HistoryEvent.STATE_POP, null));\n};\n\nHistory.prototype.getNumStates = function () {\n  return this._states.length;\n};\n\nHistory._instance = null;\n\nHistory.setup = function () {\n  return History._instance = new History();\n};\n\nHistory.get = function () {\n  return History._instance;\n};\n\nHistory.prototype.enable = function () {\n  this._enabled = false;\n};\n\nHistory.prototype.disable = function () {\n  this._enabled = true;\n};\n\nmodule.exports = History;","map":{"version":3,"sources":["/Users/roaa/Desktop/demo/node_modules/@brunoimbrizi/controlkit/lib/core/History.js"],"names":["EventDispatcher","require","Event_","HistoryEvent","MAX_STATES","History","apply","arguments","_states","_enabled","prototype","Object","create","constructor","pushState","object","key","value","states","length","shift","push","dispatchEvent","STATE_PUSH","getState","statesLen","state","i","popState","lastState","pop","STATE_POP","getNumStates","_instance","setup","get","enable","disable","module","exports"],"mappings":"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","sourcesContent":["var EventDispatcher = require('./event/EventDispatcher'),\r\n    Event_ = require('./event/Event'),\r\n    HistoryEvent = require('./HistoryEvent');\r\n\r\nvar MAX_STATES = 30;\r\n\r\nfunction History() {\r\n    EventDispatcher.apply(this, arguments);\r\n    this._states = [];\r\n    this._enabled = false;\r\n}\r\nHistory.prototype = Object.create(EventDispatcher.prototype);\r\nHistory.prototype.constructor = History;\r\n\r\nHistory.prototype.pushState = function (object, key, value) {\r\n    if (this._enabled){\r\n        return;\r\n    }\r\n\r\n    var states = this._states;\r\n    if (states.length >= MAX_STATES){\r\n        states.shift();\r\n    }\r\n    states.push({object: object, key: key, value: value});\r\n    this.dispatchEvent(new Event_(this, HistoryEvent.STATE_PUSH, null));\r\n};\r\n\r\nHistory.prototype.getState = function (object, key) {\r\n    var states = this._states,\r\n        statesLen = states.length;\r\n\r\n    if (statesLen == 0){\r\n        return null;\r\n    }\r\n\r\n    var state, value;\r\n    var i = -1;\r\n    while (++i < statesLen) {\r\n        state = states[i];\r\n        if (state.object === object) {\r\n            if (state.key === key) {\r\n                value = state.value;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return value;\r\n};\r\n\r\nHistory.prototype.popState = function () {\r\n    if (this._enabled){\r\n        return;\r\n    }\r\n\r\n    var states = this._states;\r\n    if (states.length < 1){\r\n        return;\r\n    }\r\n\r\n    var lastState = states.pop();\r\n    lastState.object[lastState.key] = lastState.value;\r\n\r\n    this.dispatchEvent(new Event_(this, HistoryEvent.STATE_POP, null));\r\n};\r\n\r\nHistory.prototype.getNumStates = function () {\r\n    return this._states.length;\r\n};\r\n\r\nHistory._instance = null;\r\n\r\nHistory.setup = function () {\r\n    return History._instance = new History();\r\n};\r\n\r\nHistory.get = function () {\r\n    return History._instance;\r\n};\r\n\r\nHistory.prototype.enable = function () {\r\n    this._enabled = false;\r\n};\r\nHistory.prototype.disable = function () {\r\n    this._enabled = true;\r\n};\r\n\r\nmodule.exports = History;"]},"metadata":{},"sourceType":"script"}